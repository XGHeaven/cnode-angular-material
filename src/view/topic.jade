md-button.md-fab.md-fab-bottom-right.cn-fixed(ng-click="focusReply()")
	i.fa.fa-reply
md-list
	md-subheader Author
	md-list-item.md-3-line
		img.md-avatar(src="{{author.avatar_url}}")
		.md-list-item-text
			div 
				| {{author.loginname}} 
				cn-label(cn-tab="tab")
			div 创建于 {{create_at | date: 'yyyy-MM-dd hh:mm:ss'}}
			div 最近一次回复 {{last_reply_at | diffDate}}
			div 回复次数: {{reply_count}} , 浏览次数: {{visit_count}}
			div
	md-divider

	md-subheader Content
	md-list-item
		md-content.cn-content
			div(ng-bind-html="content | Markdown")
	md-divider

	md-subheader Replies
	md-list-item.md-3-line.reply.md-long-text(ng-repeat="reply in replies")
		img.md-avatar(ng-src="{{reply.author.avatar_url}}")
		.md-list-item-text
			div {{reply.author.loginname}}
			div 回复时间：{{reply.create_at | diffDate}}
			div.cn-content(ng-bind-html="reply.content | Markdown")
		div(ng-switch="reply.author.loginname !== CNUser.loginname")
			div(ng-switch-when="true" layout="column")
				md-button.md-icon-button(ng-class="{stared:reply.ups.indexOf(CNUser.id) !== -1, 'fa-spin':reply.loading}" ng-click="star(reply)")
					md-tooltip(md-direction="left") {{reply.ups.length}} Stared
					i.fa.fa-star
				md-button(ng-click="replyTo(reply)").md-icon-button
					md-tooltip(md-direction="left") Reply
					i.fa.fa-reply
			div(ng-switch-when="false" layout="column")
				md-button.md-icon-button
					i.fa.fa-edit
				md-button.md-icon-button
					i.fa.fa-trash
		md-divider

	md-subheader Reply
	md-list-item(ng-if="!!replyFor")
		md-button(ng-click="removeReplyFor()")
			| 回复给 
			| {{replyFor.author.loginname}} 
			i (点击删除)
	md-list-item(ng-if="replyPreview === false")
		md-input-container(flex)
			label Reply Text Here (Support Markdown)
			textarea#replyText(ng-model="$parent.replyText")
	md-list-item(ng-if="replyPreview === true")
		md-content.cn-content
			span(ng-bind-html="$parent.replyText | Markdown")
	md-list-item
		md-button(type="button" ng-click="togglePreview()") 预览
		md-button.md-accent(type="button" ng-click="submit()") 提交