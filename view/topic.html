<md-button ng-click="focusReply()" aria-label="Reply" class="md-fab md-fab-bottom-right md-primary cn-fixed"><i class="fa fa-reply"></i></md-button><md-list><md-subheader>Author</md-subheader><md-list-item class="md-3-line"><a ui-sref="main.user({name: author.loginname})"><img ng-src="{{author.avatar_url}}" class="md-avatar"/></a><div class="md-list-item-text"><h3><cn-label cn-tab="tab"></cn-label><a ui-sref="main.user({name: author.loginname})">{{author.loginname}} </a><small>创建于 {{create_at | date: 'yyyy-MM-dd hh:mm:ss'}}</small></h3><h4>最近一次回复 {{last_reply_at | diffDate}} <a ng-href="https://cnodejs.org/topic/{{id}}" class="label label-warning">在CNode.JS中打开</a></h4><h4>回复次数: <span class="label label-success">{{reply_count || 0}}</span>, 浏览次数: <span class="label label-primary">{{visit_count || 0}}</span></h4></div></md-list-item><md-divider></md-divider><md-subheader>Content</md-subheader><md-list-item><md-content class="cn-content"><div ng-bind-html="content | Markdown"></div></md-content></md-list-item><md-divider></md-divider><md-subheader>Replies</md-subheader><md-list-item ng-repeat="reply in replies" class="md-3-line reply md-long-text"><a ui-sref="main.user({name: reply.author.loginname})"><img ng-src="{{reply.author.avatar_url}}" class="md-avatar"/></a><div class="md-list-item-text"><h5> <a ui-sref="main.user({name: reply.author.loginname})">{{reply.author.loginname}} </a><small>回复时间：{{reply.create_at | diffDate}}</small></h5><p ng-bind-html="reply.content | removeTail | Markdown" class="cn-content"></p></div><div ng-switch="reply.author.loginname !== $root.user.loginname"><div ng-switch-when="true" layout="column"><md-button ng-class="{stared:reply.ups.indexOf($root.user.id) !== -1, 'fa-spin':reply.loading}" ng-click="star(reply)" class="md-icon-button"><md-tooltip md-direction="left">{{reply.ups.length}} Stared</md-tooltip><i class="fa fa-star"></i></md-button><md-button ng-click="replyTo(reply)" class="md-icon-button"><md-tooltip md-direction="left">Reply</md-tooltip><i class="fa fa-reply"></i></md-button></div><div ng-switch-when="false" layout="column"><md-button ng-click="edit()" aria-label="edit" class="md-icon-button"><i class="fa fa-edit"></i></md-button><md-button ng-click="delete()" aria-label="delete" class="md-icon-button"><i class="fa fa-trash"></i></md-button></div></div><md-divider></md-divider></md-list-item><md-subheader>Reply</md-subheader><md-list-item ng-if="!!replyFor"><md-button ng-click="removeReplyFor()">回复给 
{{replyFor.author.loginname}} <i>(点击删除)</i></md-button></md-list-item><md-list-item ng-if="replyPreview === false"><md-input-container flex="flex"><label>Reply Text Here (Support Markdown)</label><textarea id="replyText" ng-model="$parent.replyText"></textarea></md-input-container></md-list-item><md-list-item ng-if="replyPreview === true"><md-content class="cn-content"><p ng-bind-html="$parent.replyText | Markdown" class="cn-content cn-quote"></p></md-content></md-list-item><md-list-item><md-button type="button" ng-click="togglePreview()">预览</md-button><md-button type="button" ng-click="submit()" class="md-primary">提交</md-button></md-list-item></md-list>